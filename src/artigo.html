<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Artigo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    #titulo {
      font-weight: 700;
      font-size: 2.5rem;
      margin-bottom: 0.3rem;
      border-bottom: 2px solid #0d6efd;
      padding-bottom: 0.3rem;
    }
    #data {
      font-size: 0.9rem;
      color: #6c757d;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    #data::before {
      content: "ðŸ“…";
    }
    #conteudo {
      font-size: 1.125rem;
      line-height: 1.7;
      text-align: justify;
      margin-bottom: 2rem;
      white-space: pre-wrap; /* preserva quebras de linha */
    }
    #anexoContainer a {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 0.3rem;
      border: 1px solid #0d6efd;
      color: #0d6efd;
      font-weight: 600;
      transition: background-color 0.2s, color 0.2s;
      text-decoration: none;
    }
    #anexoContainer a:hover {
      background-color: #0d6efd;
      color: white;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container py-5">
    <h1 id="titulo"></h1>
    <p id="data"></p>
    <div id="conteudo"></div>
    <div id="anexoContainer"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');

      if (!id) {
        document.body.innerHTML = '<div class="container py-5"><h2>Artigo nÃ£o encontrado.</h2></div>';
        return;
      }

      try {
        const response = await fetch('http://127.0.0.1:8000/novo_sys/');
        const artigos = await response.json();
        const artigo = artigos.find(a => a.id == id);

        if (!artigo) {
          document.body.innerHTML = '<div class="container py-5"><h2>Artigo nÃ£o encontrado.</h2></div>';
          return;
        }

        document.getElementById('titulo').innerText = artigo.titulo;
        document.getElementById('data').innerText = `Publicado em: ${new Date(artigo.data_criacao).toLocaleDateString()}`;
        document.getElementById('conteudo').innerText = artigo.conteudo;

        if (artigo.anexo) {
          document.getElementById('anexoContainer').innerHTML =
            `<a href="${artigo.anexo}" target="_blank" rel="noopener noreferrer">Ver Anexo</a>`;
        }

      } catch (e) {
        console.error(e);
        document.body.innerHTML = '<div class="container py-5"><h2>Erro ao carregar artigo.</h2></div>';
      }
    });
  </script>

</body>
</html>
